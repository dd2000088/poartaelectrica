<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Poarta Mea</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  text-align: center;
  padding: 30px;
}

h1 {
  margin-bottom: 20px;
}

button {
  padding: 12px 20px;
  margin: 10px;
  font-size: 16px;
  cursor: pointer;
}

#status {
  margin-top: 20px;
  font-size: 18px;
  font-weight: bold;
  min-height: 30px;
}

/* ===== ANIMATIE POARTA ===== */
.gates {
  display: flex;
  justify-content: center;
  margin-top: 40px;
}

.gate {
  width: 80px;
  height: 120px;
  background: #555;
  margin: 0 5px;
  transition: transform 1.2s ease;
}

/* INCHIS */
.closed-left {
  transform: rotateY(0deg);
}
.closed-right {
  transform: rotateY(0deg);
}

/* DESCHIS */
.open-left {
  transform: rotateY(-75deg);
  transform-origin: left;
}
.open-right {
  transform: rotateY(75deg);
  transform-origin: right;
}
</style>
</head>

<body>

<h1>Control PoartÄƒ ElectricÄƒ</h1>

<button onclick="sendCmd('open')">Deschide</button>
<button onclick="sendCmd('close')">ÃŽnchide</button>
<button onclick="sendCmd('stop')">Stop</button>

<div id="status">Stare necunoscutÄƒ</div>

<div class="gates">
  <div id="gateLeft" class="gate closed-left"></div>
  <div id="gateRight" class="gate closed-right"></div>
</div>

<script>
const statusDiv = document.getElementById("status");
const gateLeft = document.getElementById("gateLeft");
const gateRight = document.getElementById("gateRight");

function setStatus(text) {
  statusDiv.textContent = text; // ðŸ”´ suprascrie mesajul vechi
}

async function sendCmd(cmd) {
  setStatus("Se trimite comanda...");
  try {
    await fetch(`/api/${cmd}`);
  } catch {
    setStatus("Eroare conexiune ESP");
  }
}

// ===== AICI SIMULEZI RÄ‚SPUNSUL DE LA ESP =====
// cÃ¢nd vei avea endpoint real, doar schimbi fetch-ul
function gateOpened() {
  gateLeft.className = "gate open-left";
  gateRight.className = "gate open-right";
  setStatus("PorÈ›ile sunt complet DESCHISE");
}

function gateClosed() {
  gateLeft.className = "gate closed-left";
  gateRight.className = "gate closed-right";
  setStatus("PorÈ›ile sunt complet ÃŽNCHISE");
}

// DEMO (doar ca sÄƒ vezi animaÈ›ia)
setTimeout(gateOpened, 1500);
setTimeout(gateClosed, 4500);
</script>

</body>
</html>
